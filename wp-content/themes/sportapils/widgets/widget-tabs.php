<?phpclass widget_tabs extends WP_Widget {    /*  widget_tabs Setup  */    public function __construct() {        parent::__construct(false, $name = esc_html__('Sportapils tabs block', 'sportapils' ), array(            'description' => esc_html__('Widget for displaying tabs', 'sportapils' )        ));    }    /**     * How to display the widget on the screen.     */    public function widget( $args, $instance ) {        extract( $args );        /* Our variables from the widget settings. */        $code = $instance['code'];        for ($i = 1; $i <= 8; $i++){            $instance['title_'.$i] = (!empty($instance['title_'.$i])) ? $instance['title_'.$i] : '';            $instance['number_'.$i] = (!empty($instance['number_'.$i])) ? absint($instance['number_'.$i]) : 3;            $instance['cats_id_'.$i] = isset($instance['cats_id_'.$i]) ? $instance['cats_id_'.$i] : '';        } ?>        <section class="list-tabs centered">          <input type="checkbox" id="toggle" class="visually-hidden">          <label for="toggle" class="list-control"></label>                    <nav class="list-nav">        <?php          for ($i = 1; $i <= 8; $i++):            if ( !empty($instance['title_'.$i]) ): ?>            <a href="#listTab<?= $i; ?>" class="list-tab <?php echo $i == 1 ? ' active' : ''; ?> tab-style-<?= $instance['cats_id_'.$i]; ?>">              <?php echo $instance['title_'.$i]; ?>            </a>        <?php             endif;          endfor; ?>          </nav>          <div class="list-content">        <?php            for ($i = 1; $i <= 8; $i++): ?>            <div class="list-panel<?php echo $i == 1 ? ' active' : ''; ?>" id="listTab<?= $i; ?>">        <?php            global $post;            $args = array( 'category' => $instance['cats_id_'.$i], 'posts_per_page' => $instance['number_'.$i] );            $myposts = get_posts( $args );            if ( $myposts ):                foreach ( $myposts as $post ) :                     setup_postdata( $post ); ?>                    <div class="list-item list-category list-style-<?= $instance['cats_id_'.$i]; ?>" data-category="<?php echo str_replace(' ', '', strtolower( get_the_category($post->id)[0]->name ) ); ?>">                      <div class="list-meta">                        <a href="<?php echo esc_url( get_author_posts_url( get_the_author_meta( 'ID' ) ) ); ?>" class="list-author">                          @<?php echo get_the_author_meta('display_name');?>                        </a> <?php echo get_the_date(); ?>                      </div>                      <div class="list-title">                        <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>                      </div>                    </div>            <?php                 endforeach;             endif; ?>            </div>        <?php          endfor;           wp_reset_postdata(); ?>          </div>        </section>        <?php    }    /**     * Update the widget settings.     */    public function update( $new_instance, $old_instance ) {        $instance = $old_instance;        var_dump($instance);        for ($i = 1; $i <= 8; $i++){            $instance['title_'.$i] = sanitize_text_field($new_instance['title_'.$i]);            $instance['number_'.$i] = (int)$new_instance['number_'.$i];            $instance['cats_id_'.$i] = (int)$new_instance['cats_id_'.$i];        }        var_dump($instance);        return $instance;    }    public function form( $instance ) {        for ($i = 1; $i <= 8; $i++){            $instance['title_'.$i] = isset($instance['title_'.$i]) ? esc_attr($instance['title_'.$i]) : '';               $instance['number_'.$i] = isset($instance['number_'.$i]) ? absint($instance['number_'.$i]) : 3;            $instance['cats_id_'.$i] = isset($instance['cats_id_'.$i]) ? $instance['cats_id_'.$i] : '';        }        $cats = get_categories();        ?><style>.tab-form-block { display: flex; justify-content: space-between; align-items: center; }.tab-input { width: 40%;}</style><?php         for ($i = 1; $i <= 8; $i++):?>              <p class="tab-form-block">            <label for="<?php echo esc_attr($this->get_field_id('title_'.$i)); ?>"><?php esc_html_e('Title:', 'sportapils'); ?></label>            <input class="widefat tab-input" id="<?php echo esc_attr($this->get_field_id('title_'.$i)); ?>"                   name="<?php echo esc_attr($this->get_field_name('title_'.$i)); ?>"                    type="text"                   value="<?php echo esc_attr($instance['title_'.$i]); ?>"/>            <label for="<?php echo esc_attr($this->get_field_id('number_'.$i)); ?>"><?php esc_html_e('Posts:', 'sportapils'); ?></label>            <input class="tiny-text" id="<?php echo esc_attr($this->get_field_id('number_'.$i)); ?>"                   name="<?php echo esc_attr($this->get_field_name('number_'.$i)); ?>" type="number" step="1" min="1" max="16"                   value="<?php echo !empty( $instance['number_'.$i] ) ? esc_attr($instance['number_'.$i]) : 1; ?>" size="2"/></p>               <p class="tab-form-block">            <label  for="<?php echo esc_attr($this->get_field_id('cats_id_'.$i)); ?>"><?php esc_html_e('Select Category:', 'sportapils'); ?></label>            <select id="<?php echo esc_attr($this->get_field_id('cats_id_'.$i)); ?>"                    name="<?php echo esc_attr($this->get_field_name('cats_id_'.$i)); ?>">                <option value=""><?php esc_html_e('All', 'sportapils'); ?></option>                <?php foreach ($cats as $cat) { ?>                    <option value="<?php echo esc_attr($cat->term_id); ?>" <?php echo selected($instance['cats_id_'.$i], $cat->term_id, false) ?>> <?php echo esc_attr($cat->name) ?></option>                <?php } ?>            </select></p>        <hr />        <?php                  endfor;      }}add_action( 'widgets_init', 'widget_tabs_register' );function widget_tabs_register() {    register_widget( 'widget_tabs' );}